<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Budget Tracker</title>
    <!-- Resource hints for faster loading -->
    <link rel="dns-prefetch" href="https://telegram.org">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://telegram.org">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/styles.css" as="style">
    <link rel="preload" href="/tabs.js" as="script">
    <link rel="preload" href="/main.js" as="script">
    
    <!-- Google Fonts with font-display: swap -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="/styles.css">
    
    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="/tabs.js" defer></script>
    <script src="/main.js" defer></script>
</head>
<body>
<div id="app">
    <div id="content">
        <!-- Tab 1 Content (Spendings) -->
        <div class="tab-content active" data-tab="0">
            <div id="header">
                <div id="header-top">
                    <span id="net-total-label">Net total</span>
                    <div id="period-dropdown-container">
                        <span id="month-pill" class="clickable-pill"><span class="pill-text">this month</span></span>
                        <div id="period-dropdown" class="period-dropdown" style="display: none;">
                            <div class="period-option" data-period="today">
                                <span class="period-option-text">Today</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" style="display: none;" />
                            </div>
                            <div class="period-option" data-period="week">
                                <span class="period-option-text">This week</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" style="display: none;" />
                            </div>
                            <div class="period-option active" data-period="month">
                                <span class="period-option-text">This month</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" />
                            </div>
                            <div class="period-option" data-period="year">
                                <span class="period-option-text">This year</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" style="display: none;" />
                            </div>
                        </div>
                    </div>
                </div>
                <div id="total">
                    <div id="total-skeleton" class="skeleton-total">
                        <span class="skeleton-box skeleton-currency"></span>
                        <span class="skeleton-box skeleton-amount"></span>
                    </div>
                </div>
            </div>
            <div id="transactions">
                <div id="transactions-skeleton" class="skeleton-transactions">
                    <div class="skeleton-transaction-group">
                        <div class="skeleton-date-header">
                            <span class="skeleton-box skeleton-date-label"></span>
                            <span class="skeleton-box skeleton-date-subtotal"></span>
                        </div>
                        <div class="skeleton-date-divider"></div>
                        <div class="skeleton-transaction">
                            <div class="skeleton-icon"></div>
                            <div class="skeleton-info">
                                <div class="skeleton-box skeleton-name"></div>
                                <div class="skeleton-box skeleton-time"></div>
                            </div>
                            <div class="skeleton-box skeleton-amount-right"></div>
                        </div>
                        <div class="skeleton-transaction">
                            <div class="skeleton-icon"></div>
                            <div class="skeleton-info">
                                <div class="skeleton-box skeleton-name"></div>
                                <div class="skeleton-box skeleton-time"></div>
                            </div>
                            <div class="skeleton-box skeleton-amount-right"></div>
                        </div>
                        <div class="skeleton-transaction">
                            <div class="skeleton-icon"></div>
                            <div class="skeleton-info">
                                <div class="skeleton-box skeleton-name"></div>
                                <div class="skeleton-box skeleton-time"></div>
                            </div>
                            <div class="skeleton-box skeleton-amount-right"></div>
                        </div>
                    </div>
                    <div class="skeleton-transaction-group">
                        <div class="skeleton-date-header">
                            <span class="skeleton-box skeleton-date-label"></span>
                            <span class="skeleton-box skeleton-date-subtotal"></span>
                        </div>
                        <div class="skeleton-date-divider"></div>
                        <div class="skeleton-transaction">
                            <div class="skeleton-icon"></div>
                            <div class="skeleton-info">
                                <div class="skeleton-box skeleton-name"></div>
                                <div class="skeleton-box skeleton-time"></div>
                            </div>
                            <div class="skeleton-box skeleton-amount-right"></div>
                        </div>
                        <div class="skeleton-transaction">
                            <div class="skeleton-icon"></div>
                            <div class="skeleton-info">
                                <div class="skeleton-box skeleton-name"></div>
                                <div class="skeleton-box skeleton-time"></div>
                            </div>
                            <div class="skeleton-box skeleton-amount-right"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Edit Transaction Popup -->
        <div id="edit-transaction-overlay" class="edit-transaction-overlay" style="display: none;">
            <div id="edit-transaction-popup" class="edit-transaction-popup">
                <!-- Header -->
                <div class="edit-header">
                    <button id="close-edit-button" class="edit-header-button edit-close-button">
                        <img src="/assets/X.svg" alt="Close" class="edit-icon" />
                    </button>
                    <h2 class="edit-title">Edit</h2>
                    <button id="delete-button" class="edit-header-button edit-delete-button">
                        <img src="/assets/delete.svg" alt="Delete" class="edit-icon" />
                    </button>
                </div>
                
                <!-- Middle Content: Amount + Name (Centered) -->
                <div class="edit-middle-content">
                    <!-- Amount Display -->
                    <div class="edit-amount-section">
                        <div class="edit-amount-wrapper">
                            <div class="edit-amount-content">
                                <span class="edit-currency-label" id="edit-currency-label">PLN</span>
                                <span class="edit-amount-display" id="edit-amount-display">0,00</span>
                            </div>
                            <button id="backspace-button" class="edit-backspace-button">
                                <img src="/assets/backspace.svg" alt="Backspace" class="edit-backspace-icon" />
                            </button>
                        </div>
                    </div>
                    
                    <!-- Transaction Name Field -->
                    <div class="edit-name-section">
                        <div class="edit-name-wrapper">
                            <img src="/assets/AA.svg" alt="Name" class="edit-name-icon" />
                            <input type="text" id="edit-name" class="edit-name-input" placeholder="Transaction name" />
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Section: Category + Keyboard -->
                <div class="edit-bottom-section">
                    <!-- Category Selection -->
                    <div class="edit-category-section">
                        <button id="edit-category-button" class="edit-category-button">
                            <span class="edit-category-emoji" id="edit-category-emoji">‚ùî</span>
                            <span class="edit-category-name" id="edit-category-name">Uncategorized</span>
                        </button>
                        <div id="edit-category-dropdown" class="edit-category-dropdown" style="display: none;">
                            <!-- Categories will be populated here -->
                        </div>
                    </div>
                    
                    <!-- Custom Numeric Keyboard -->
                <div class="edit-keyboard">
                    <div class="keyboard-row">
                        <button class="keyboard-key" data-key="1">1</button>
                        <button class="keyboard-key" data-key="2">2</button>
                        <button class="keyboard-key" data-key="3">3</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="keyboard-key" data-key="4">4</button>
                        <button class="keyboard-key" data-key="5">5</button>
                        <button class="keyboard-key" data-key="6">6</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="keyboard-key" data-key="7">7</button>
                        <button class="keyboard-key" data-key="8">8</button>
                        <button class="keyboard-key" data-key="9">9</button>
                    </div>
                    <div class="keyboard-row">
                        <button class="keyboard-key" data-key=".">.</button>
                        <button class="keyboard-key" data-key="0">0</button>
                        <button id="save-button" class="keyboard-key keyboard-save">
                            <img src="/assets/check-done.svg" alt="Done" class="keyboard-save-icon" />
                        </button>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Tab 2 Content (Categorize) -->
        <div class="tab-content" data-tab="1">
            <div id="categorize-container">
                <div class="categorize-sticky-section">
                    <div class="categorize-header">
                        <h2 class="page-title">Categorize</h2>
                        <div id="categorize-counter" class="categorize-counter">
                            <div id="categorize-counter-skeleton" class="skeleton-box skeleton-counter" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div id="categorize-card-wrapper" class="categorize-card-wrapper">
                        <div id="categorize-transaction" class="categorize-transaction"></div>
                        <div id="categorize-card-skeleton" class="categorize-card-skeleton">
                            <div class="skeleton-card-top">
                                <div class="skeleton-card-name"></div>
                                <div class="skeleton-card-time"></div>
                            </div>
                            <div class="skeleton-card-bottom">
                                <div class="skeleton-card-amount-label"></div>
                                <div class="skeleton-card-amount"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="categorize-divider"></div>
                </div>
                
                <div id="categorize-categories" class="categorize-categories-section">
                    <div id="categorize-label" class="categorize-label">Select category</div>
                    <div id="categorize-buttons" class="categorize-buttons"></div>
                    <div id="categorize-buttons-skeleton" class="categorize-buttons-skeleton">
                        <div class="skeleton-category-button"></div>
                        <div class="skeleton-category-button"></div>
                        <div class="skeleton-category-button"></div>
                        <div class="skeleton-category-button"></div>
                        <div class="skeleton-category-button"></div>
                        <div class="skeleton-category-button"></div>
                    </div>
                </div>
                
                <div id="categorize-complete" class="categorize-complete" style="display: none;">
                    <img src="/assets/categorize-complete.svg" alt="Complete" class="categorize-complete-icon" width="120" height="120" loading="lazy" />
                    <h2>You're all set!</h2>
                    <p>All transactions have been categorized</p>
                </div>
            </div>
        </div>
        
        <!-- Tab 3 Content (Insights) -->
        <div class="tab-content" data-tab="2">
            <div class="insights-container">
                <div class="insights-header">
                    <h2 class="page-title insights-title">Insights</h2>
                    <div class="insights-period-dropdown-container">
                        <div id="insights-period-pill" class="insights-period-pill clickable-pill">
                            <span class="pill-text">month</span>
                            <img src="/assets/chevron-down.svg" alt="Dropdown" class="period-dropdown-icon" width="12" height="12" />
                        </div>
                        <div id="insights-period-dropdown" class="insights-period-dropdown" style="display: none;">
                            <div class="period-option" data-insights-period="week">
                                <span class="period-option-text">week</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" style="display: none;" />
                            </div>
                            <div class="period-option active" data-insights-period="month">
                                <span class="period-option-text">month</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" />
                            </div>
                            <div class="period-option" data-insights-period="year">
                                <span class="period-option-text">year</span>
                                <img src="/assets/checkmark.svg" alt="Checkmark" class="period-checkmark" width="18" height="18" style="display: none;" />
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="insights-summary">
                    <div class="insights-left-section">
                        <div class="insights-date-range">1 NOV - TODAY</div>
                        <div class="insights-total-spent">
                            <div class="insights-total-value">
                                <span id="insights-total-currency" class="insights-currency-label">PLN</span>
                                <span class="insights-amount-value">0,00</span>
                            </div>
                        </div>
                    </div>
                    <div class="insights-right-section">
                        <div class="insights-per-day">
                            <div class="insights-per-day-label">SPENT/DAY</div>
                            <div class="insights-per-day-value">
                                <span id="insights-perday-currency" class="insights-currency-label">PLN</span>
                                <span class="insights-amount-value-small">0,00</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="insights-chart-container">
                    <div id="insights-chart" class="insights-chart"></div>
                </div>
                
                <div class="insights-categories-section">
                    <div class="insights-categories-header">Categories</div>
                    <div class="insights-divider"></div>
                    <div id="insights-categories-list" class="insights-categories-list"></div>
                </div>
                
                <button id="analyze-ai-button" class="analyze-ai-button">Analyse with AI</button>
            </div>
        </div>
        
        <!-- Tab 4 Content (Settings) -->
        <div class="tab-content" data-tab="3">
            <div class="settings-container">
                <h2 class="page-title">Settings</h2>
                <div class="settings-section">
                    <div class="settings-subheader">General</div>
                    <div class="settings-divider"></div>
                    <div class="settings-row currency-row" data-action="currency">
                        <div class="currency-icon-wrapper">
                            <svg class="currency-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip_currency)">
                                    <path d="M12.3716 18.6793C14.8317 18.6793 16.9965 17.5641 17.8166 15.3172C17.8985 15.0958 17.9477 14.7678 17.9477 14.5627C17.9477 14.0954 17.6607 13.833 17.1933 13.833C16.7505 13.833 16.5291 14.0954 16.3897 14.4889C15.8977 16.2192 14.2494 17.195 12.3798 17.195C9.22269 17.195 7.72205 14.5381 7.72205 11.3155C7.72205 8.09278 9.27189 5.4851 12.3716 5.4851C14.1592 5.4851 15.7829 6.51013 16.2831 8.23219C16.4307 8.6586 16.6357 8.8964 17.0949 8.8964C17.5377 8.8964 17.8412 8.60939 17.8412 8.15838C17.8412 7.95337 17.792 7.64997 17.7017 7.41216C16.9063 5.2473 14.7415 4.00086 12.3716 4.00086C8.27147 4.00086 6 7.14155 6 11.3155C6 15.5304 8.24687 18.6793 12.3716 18.6793ZM8.36167 20.9835C8.67328 20.9835 8.86188 20.8441 8.92749 20.5408L13.4458 2.83642C13.4786 2.72162 13.495 2.63962 13.495 2.54942C13.495 2.22141 13.2982 2 12.9292 2C12.6586 2 12.47 2.164 12.3962 2.44281L7.87786 20.1553C7.84506 20.2701 7.82865 20.3768 7.82865 20.4833C7.82865 20.7376 8.03366 20.9835 8.36167 20.9835ZM11.5844 20.9835C11.896 20.9835 12.0846 20.8441 12.1584 20.5408L16.6767 2.83642C16.7013 2.72162 16.7259 2.63962 16.7259 2.54942C16.7259 2.22141 16.5291 2 16.1601 2C15.8895 2 15.6927 2.164 15.6189 2.44281L11.1006 20.1553C11.0759 20.2701 11.0595 20.3768 11.0595 20.4833C11.0595 20.7376 11.2564 20.9835 11.5844 20.9835Z" fill="currentColor"/>
                                </g>
                                <defs>
                                    <clipPath id="clip_currency">
                                        <rect width="12.2511" height="19" fill="white" transform="translate(6 2)"/>
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <span class="settings-row-label">Currency</span>
                        <div class="settings-row-right">
                            <span class="settings-row-value">USD</span>
                            <svg class="chevron-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip_chevron)">
                                    <path d="M17.6895 12.4766C17.6895 12.2324 17.5918 12.0078 17.4062 11.832L9.67188 4.25391C9.49609 4.08789 9.28125 4 9.02734 4C8.5293 4 8.13867 4.38086 8.13867 4.88867C8.13867 5.13281 8.23633 5.35742 8.39258 5.52344L15.502 12.4766L8.39258 19.4297C8.23633 19.5957 8.13867 19.8105 8.13867 20.0645C8.13867 20.5723 8.5293 20.9531 9.02734 20.9531C9.28125 20.9531 9.49609 20.8652 9.67188 20.6895L17.4062 13.1211C17.5918 12.9355 17.6895 12.7207 17.6895 12.4766Z" fill="currentColor"/>
                                </g>
                                <defs>
                                    <clipPath id="clip_chevron">
                                        <rect width="11.6895" height="16.9629" fill="white" transform="translate(6 4)"/>
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Currency Selection Page -->
        <div id="currency-selection-page" class="currency-selection-page" style="display: none;">
            <div class="currencies-page">
                <!-- Header -->
                <div class="currency-page-header">
                    <div class="currency-back-button" id="currency-back-button">
                        <div class="back-icon">
                            <div class="chevron-group">
                                <svg fill="none" preserveAspectRatio="none" viewBox="0 0 9 13">
                                    <g>
                                        <path d="M8.76712 6.35742C8.76712 6.17431 8.69385 6.00586 8.55465 5.87402L2.75391 0.19043C2.62207 0.065918 2.46094 0 2.2705 0C1.89697 0 1.604 0.285644 1.604 0.666504C1.604 0.849607 1.67725 1.01806 1.79444 1.14258L7.12646 6.35742L1.79444 11.5723C1.67725 11.6968 1.604 11.8579 1.604 12.0484C1.604 12.4292 1.89697 12.7148 2.2705 12.7148C2.46094 12.7148 2.62207 12.6489 2.75391 12.5171L8.55465 6.84082C8.69385 6.70166 8.76712 6.54052 8.76712 6.35742Z" fill="#A6A6A6"/>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="currency-page-title">Currencies</div>
                    <div class="spacer"></div>
                </div>

                <!-- Currency List -->
                <div class="currency-wrapper">
                    <div class="currency-container">
                        <div class="currency-list" id="currency-list">
                            <!-- Currency items will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tab Bar -->
    <div id="tab-bar">
        <div class="tab-item active" data-tab="0">
            <img src="/assets/tab-mail.svg" alt="Mail" class="tab-icon" width="32" height="32" />
        </div>
        <div class="tab-item" data-tab="1">
            <img src="/assets/tab-folder.svg" alt="Folder" class="tab-icon" width="32" height="32" />
        </div>
        <div class="tab-item" data-tab="2">
            <img src="/assets/tab-chart.svg" alt="Chart" class="tab-icon" width="32" height="32" />
        </div>
        <div class="tab-item" data-tab="3">
            <img src="/assets/tab-settings.svg" alt="Settings" class="tab-icon" width="32" height="32" />
        </div>
    </div>
</div>

</body>
</html>
